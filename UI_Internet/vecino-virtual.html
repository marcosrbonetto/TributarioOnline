<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Portal Institucional</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vecino Virtual · Acceder a Tributario Online</title>
    <link rel="shortcut icon" href="https://www.cordoba.gob.ar/wp-content/uploads/2016/07/favico-sm.png">

    <style>
        html, body, iframe {
            height: 100%;
            width: 100%;
            margin: 0;
            padding: 0;
            border: 0;
        }
    </style>
</head>
<body>
    <iframe src="https://servicios2.cordoba.gov.ar/VecinoVirtualUtils_Internet/Acceder?subtitulo=Tributario Online&url=/index.html&procesarLogin=false"></iframe>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            initVecinoVirtual();
        });

        function initVecinoVirtual() {
            window.addEventListener('message', function (e) {
                if (e === undefined || e.data === undefined) return;

                window.location.href = "http://localhost:3000/#/Inicio";
                // Lógica/Validación con procesarLogin=true
                //procesarInicioSesion(e.data);
            });
        }

        function procesarInicioSesion(data) {

            // << Agregar logica personalizada >>

            var token = data.Token;
            var logica = true;
            var iframe = document.querySelector("iframe");

            if(logica) {
                iframe.contentWindow.postMessage('login-completado', '*');
            } else {
                iframe .contentWindow.postMessage('reintentar-login', '*');
            }
        }
    </script>
</body>
</html>